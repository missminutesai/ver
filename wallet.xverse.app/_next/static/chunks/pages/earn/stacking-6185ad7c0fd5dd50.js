(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[7614],{95457:function(e,t,i){(window.__NEXT_P=window.__NEXT_P||[]).push(["/earn/stacking",function(){return i(86766)}])},80599:function(e,t,i){"use strict";i.d(t,{PZ:function(){return p},Yy:function(){return j},fu:function(){return b},l2:function(){return h},oA:function(){return d}});var o=i(85893),n=i(66691);i(67294);var s=i(83253),a=i.n(s),c=i(41686),r=i(98272),l=i(99606);let d=(0,c.ZP)(a()).withConfig({componentId:"sc-7a7c0793-0"})(["position:absolute;top:50%;left:50%;right:auto;bottom:auto;max-height:100%;transform:translate(-50%,-50%);background:",";border-radius:16px;max-width:367px;width:100%;outline:none;backdrop-filter:blur(12px);padding-bottom:32px;padding-left:",";padding-right:",";text-align:center;box-shadow:0 12px 20px ",";"],e=>e.theme.colors.elevation6_600,e=>e.theme.space.m,e=>e.theme.space.m,e=>e.theme.colors.dropShadow),h=c.ZP.div.withConfig({componentId:"sc-7a7c0793-1"})(["padding-top:",";padding-bottom:",";display:",";justify-content:space-around;align-items:center;"],e=>e.theme.space.m,e=>e.theme.space.s,e=>e.$showCloseButton?"flex":"block"),p=(0,c.ZP)(l.kG).withConfig({componentId:"sc-7a7c0793-2"})(["margin-left:auto;align-items:center;display:flex;"]),m=c.ZP.div.withConfig({componentId:"sc-7a7c0793-3"})(["margin-bottom:",";"],e=>e.theme.space.s),u=c.ZP.div.withConfig({componentId:"sc-7a7c0793-4"})(["margin-bottom:4px;",""],e=>e.theme.typography.headline_xs),x=c.ZP.div.withConfig({componentId:"sc-7a7c0793-5"})(["",""],e=>e.theme.typography.body_bold_l),g=c.ZP.div.withConfig({componentId:"sc-7a7c0793-6"})(["margin-bottom:",";",""],e=>e.theme.space.s,e=>e.theme.typography.body_l),w=c.ZP.div.withConfig({componentId:"sc-7a7c0793-7"})(["margin-bottom:20px;",""],e=>e.theme.typography.body_m),f=c.ZP.div.withConfig({componentId:"sc-7a7c0793-8"})(["display:flex;margin-top:32px;gap:",";flex-direction:",";"],e=>e.theme.space.s,e=>e.$verticalButtons?"column":"row"),j=e=>{let{closeOnOutsideClick:t=!1,verticalButtons:i=!1,isOpen:s,onClose:a,title:c,description:l,leftButton:m,rightButton:u,showCloseButton:g=!0}=e;return(0,o.jsxs)(d,{style:{overlay:{zIndex:2,backgroundColor:r.ZP.colors.elevation0_150},content:{textAlign:"left"}},isOpen:s,onRequestClose:t?a:void 0,children:[(0,o.jsxs)(h,{$showCloseButton:g,children:[(0,o.jsx)(x,{children:c}),g&&(0,o.jsx)(p,{onClick:a,children:(0,o.jsx)(n.a,{size:28,weight:"fill",color:r.ZP.colors.white[0]})})]}),(0,o.jsx)(w,{children:l}),(0,o.jsxs)(f,{$verticalButtons:i,children:[m,u]})]})},b=e=>{let{closeOnOutsideClick:t=!1,verticalButtons:i=!1,isOpen:s,onClose:a,icon:c,title:l,subtitle:x,description:j,leftButton:b,rightButton:y}=e;return(0,o.jsxs)(d,{style:{overlay:{zIndex:2,backgroundColor:r.ZP.colors.elevation0_150}},isOpen:s,onRequestClose:t?a:void 0,children:[(0,o.jsx)(h,{$showCloseButton:!0,children:(0,o.jsx)(p,{onClick:a,children:(0,o.jsx)(n.a,{size:28,weight:"fill",color:r.ZP.colors.white[0]})})}),(0,o.jsx)(m,{children:c}),(0,o.jsx)(u,{children:l}),(0,o.jsx)(g,{children:x}),(0,o.jsx)(w,{children:j}),(0,o.jsxs)(f,{$verticalButtons:i,children:[b,y]})]})}},5798:function(e,t,i){"use strict";var o=i(85893),n=i(67294),s=i(41686);let a=s.ZP.div.withConfig({componentId:"sc-d9f603ca-0"})(["display:flex;align-items:center;width:100%;margin-right:16px;@media only screen and (min-width:480px){margin-right:8px;}"]),c=s.ZP.div.withConfig({componentId:"sc-d9f603ca-1"})(["flex-grow:1;height:32px;position:relative;cursor:",";&::before{content:'';display:block;height:4px;background:",";position:absolute;top:50%;left:0;right:0;transform:translateY(-50%);}",""],e=>{let{$disabled:t}=e;return t?"not-allowed":"pointer"},e=>{let{theme:t,$position:i}=e;return"linear-gradient(90deg, ".concat(t.colors.white[200]," ").concat(i,"%, ").concat(t.colors.white[900]," ").concat(i,"%)")},e=>{let{$disabled:t}=e;return t&&(0,s.iv)(["opacity:0.5;pointer-events:none;"])}),r=s.ZP.div.withConfig({componentId:"sc-d9f603ca-2"})(["position:absolute;top:50%;left:","%;transform:translate(-50%,-50%);width:32px;height:32px;background-color:",";border-radius:50%;cursor:",";z-index:1;@media only screen and (min-width:480px){width:16px;height:16px;}",""],e=>{let{$position:t}=e;return t},e=>e.theme.colors.white[0],e=>{let{$disabled:t}=e;return t?"not-allowed":"pointer"},e=>{let{$disabled:t}=e;return t&&(0,s.iv)(["opacity:0.5;pointer-events:none;"])});t.Z=e=>{let{min:t,max:i,value:s,onChange:l,disabled:d=!1}=e,[h,p]=(0,n.useState)(!1),m=(0,n.useRef)(null);(0,n.useEffect)(()=>{if(d)return;let e=e=>{if(e.preventDefault(),!h)return;let o=m.current;if(!o)return;let n=e instanceof MouseEvent?e.clientX:e.touches[0].clientX,{left:s,width:a}=o.getBoundingClientRect();l(Math.min(Math.max(Math.round((n-s)/a*(i-t)+t),t),i))},o=()=>{p(!1)};return h&&(window.addEventListener("mousemove",e,{passive:!1}),window.addEventListener("mouseup",o,{passive:!1}),window.addEventListener("touchmove",e,{passive:!1}),window.addEventListener("touchend",o,{passive:!1})),()=>{window.removeEventListener("mousemove",e),window.removeEventListener("mouseup",o),window.removeEventListener("touchmove",e),window.removeEventListener("touchend",o)}},[h,i,t,l,d]);let u=e=>{d||(e.preventDefault(),p(!0))},x=((s>t?s:t)-t)/(i-t)*100;return(0,o.jsx)(a,{children:(0,o.jsx)(c,{ref:m,$position:x,$disabled:d,onMouseDown:u,onTouchStart:u,onClick:e=>{if(d)return;let{left:o,width:n}=e.currentTarget.getBoundingClientRect();l(Math.min(Math.max(Math.round((e.clientX-o)/n*(i-t)+t),t),i))},children:(0,o.jsx)(r,{$position:x,$disabled:d})})})}},86766:function(e,t,i){"use strict";i.r(t),i.d(t,{default:function(){return tW}});var o=i(85893),n=i(41686);let s=(0,n.F4)(["0%,100%{opacity:1;}50%{opacity:0.5;}"]),a=n.ZP.div.withConfig({componentId:"sc-c636204b-0"})(["@media (min-width:768px){width:50%;}width:100%;height:311px;position:relative;padding:",";padding-bottom:",";border-radius:12px;animation:"," 900ms ease-out infinite;animation-timing-function:cubic-bezier(0,0,0.58,1);animation-delay:100ms;background-color:",";"],e=>e.theme.space.l,e=>e.theme.space.xl,s,e=>e.theme.colors.white_950),c=()=>(0,o.jsx)(a,{});var r=i(12675),l=i(16081),d=i(67294),h=i(99606),p=i(98272),m=i(26251),u=i(50231),x=i(96400);let g=n.zo.div.withConfig({componentId:"sc-b5aa6473-0"})(["position:relative;display:inline-block;"]),w=(0,n.zo)(h.kq).withConfig({componentId:"sc-b5aa6473-1"})(["height:36px;width:200px;padding:4px 16px;border-radius:","px;justify-content:space-between;"],e=>e.theme.radius(2)),f=n.zo.div.withConfig({componentId:"sc-b5aa6473-2"})(["position:absolute;top:100%;left:0px;z-index:10;margin-top:",";border-radius:",";border:1px solid rgba(255,255,255,0.1);padding:"," ",";background-color:rgb(31,31,31);animation:0.2s ease-in-out 0s 1 normal none running fadeIn;width:max-content;"],e=>{let{theme:t}=e;return t.space.xs},e=>{let{theme:t}=e;return t.space.s},e=>{let{theme:t}=e;return t.space.m},e=>{let{theme:t}=e;return t.space.m}),j=n.zo.div.withConfig({componentId:"sc-b5aa6473-3"})(["display:flex;flex-direction:column;gap:1px;"]),b=n.zo.button.withConfig({componentId:"sc-b5aa6473-4"})([""," color:",";background-color:transparent;padding:",";border-radius:",";align-items:center;transition:background-color 0.1s;&:hover{background-color:",";}&.active{background-color:",";}"],e=>{let{theme:t}=e;return t.typography.body_medium_m},e=>{let{theme:t}=e;return t.colors.white_0},e=>{let{theme:t}=e;return t.space.xs},e=>{let{theme:t}=e;return t.space.s},e=>{let{theme:t}=e;return t.colors.elevation3},e=>{let{theme:t}=e;return t.colors.elevation3}),y=n.zo.div.withConfig({componentId:"sc-b5aa6473-5"})(["display:flex;align-items:center;justify-content:space-between;width:170px;"]),v=n.zo.label.withConfig({componentId:"sc-b5aa6473-6"})(["color:",";",""],e=>{let{theme:t}=e;return t.colors.white_0},e=>{let{theme:t}=e;return t.typography.body_medium_m}),k=n.zo.input.attrs({type:"checkbox"}).withConfig({componentId:"sc-b5aa6473-7"})(["appearance:none;width:40px;height:20px;background:",";border-radius:10px;position:relative;cursor:pointer;transition:background 0.2s;&::before{content:'';position:absolute;width:18px;height:18px;border-radius:50%;background:",";top:1px;left:1px;transition:transform 0.2s;transform:",";}"],e=>{let{theme:t,checked:i}=e;return i?t.colors.success_medium:t.colors.elevation2b},e=>{let{theme:t}=e;return t.colors.white_0},e=>{let{checked:t}=e;return t?"translateX(20px)":"translateX(0)"}),C=n.zo.div.withConfig({componentId:"sc-b5aa6473-8"})(["width:100%;height:100%;margin:"," 0;border-bottom:1px "," solid;"],e=>{let{theme:t}=e;return t.space.xs},e=>e.theme.colors.white_800),_=[{value:null,label:"Reset"},{value:m.QQ.NotStacking,label:"Not Stacking"},{value:m.QQ.Pending,label:"Pending"},{value:m.QQ.Delegated,label:"Delegated"},{value:m.QQ.Stacking,label:"Stacking"}];var Z=()=>{var e;let[t,i]=(0,d.useState)(!1),{isMockingEnabled:n,setStackingStateMock:s,setIsMockingEnabled:a,poolStatusMock:c,setPoolStatusMock:h}=(0,u.o6)(),m=(0,x.n)(),Z=e=>{s(e),i(!1)};return m.isSuccess?(0,o.jsxs)(g,{children:[(0,o.jsxs)(w,{onClick:()=>i(e=>!e),children:["Stacking Mocker",t?(0,o.jsx)(r.U,{size:12,weight:"bold",color:p.ZP.colors.white_0}):(0,o.jsx)(l.p,{size:12,weight:"bold",color:p.ZP.colors.white_0})]}),t&&(0,o.jsxs)(f,{children:[(0,o.jsxs)(y,{children:[(0,o.jsx)(v,{children:"Mocking Enabled"}),(0,o.jsx)(k,{checked:n,onChange:()=>a(!n)})]}),n&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(y,{style:{marginTop:16,marginBottom:16},children:[(0,o.jsx)(v,{children:"Pool Open"}),(0,o.jsx)(k,{checked:null!==(e=null==c?void 0:c.isPoolOpen)&&void 0!==e&&e,onChange:()=>h({isPoolOpen:!(null==c?void 0:c.isPoolOpen),poolAvailable:!0})})]}),(0,o.jsx)(C,{}),(0,o.jsx)(j,{children:_.map(e=>(0,o.jsx)(b,{onClick:()=>Z(e.value),className:"".concat(m.data===e.value?"active":""),children:e.label},e.value))})]})]})]}):null},S=i(11170),P=i(70794),I=i(87536),z=i(86501),A=i(48373),T=i(49836),Q=i(66051),B=i(27546),N=i(7805),F=i(31518),X=i(54422),$=i(27122),D=i(23881);let E=n.zo.div.withConfig({componentId:"sc-87608efc-0"})(["height:100%;width:624px;margin:0 auto;"]),O=n.zo.h1.withConfig({componentId:"sc-87608efc-1"})(["margin-top:",";",";"],e=>e.theme.space.m,e=>{let{theme:t}=e;return t.typography.headline_xl}),R=n.zo.div.withConfig({componentId:"sc-87608efc-2"})(["",";margin-top:16px;margin-bottom:32px;"],e=>{let{theme:t}=e;return t.typography.body_medium_m}),L=n.zo.div.withConfig({componentId:"sc-87608efc-3"})(["&:first-child{width:50%;}"]),q=n.zo.div.withConfig({componentId:"sc-87608efc-4"})([""," color:",";"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400),M=n.zo.div.withConfig({componentId:"sc-87608efc-5"})(["",";"],e=>e.theme.typography.headline_m),W=n.zo.div.withConfig({componentId:"sc-87608efc-6"})(["display:flex;flex-direction:column;gap:",";input{color:",";background-color:",";}.stacking-label{color:",";}.stacking-caption{",";color:",";max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}"],e=>e.theme.space.xs,e=>e.theme.colors.white_200,e=>e.theme.colors.elevation_n1,e=>e.theme.colors.white_200,e=>e.theme.typography.body_s,e=>e.theme.colors.white_400),U=n.zo.div.withConfig({componentId:"sc-87608efc-7"})(["color:",";"],e=>e.theme.colors.white_200),G=n.zo.button.withConfig({componentId:"sc-87608efc-8"})(e=>({display:"flex",justifyContent:"flex-start",backgroundColor:"transparent",padding:e.theme.space.s,border:"1px solid ".concat(e.theme.colors.white_900),borderRadius:e.theme.space.l,transition:"background-color 0.1s ease","&:hover":{backgroundColor:e.theme.colors.elevation6_600},"&:active":{backgroundColor:e.theme.colors.elevation6_800}}));var Y=e=>{var t;let{onCancel:i}=e,n=(0,F.m$)(),s=(0,B.FB)(),a=(0,F.W4)(),c=(0,X.T)(),r=(0,D.J)(),l=(0,N.em)(),{control:d,handleSubmit:u,watch:x}=(0,I.cI)({values:{stxAmount:""}}),g=!n.isSuccess||!c.isSuccess||!a.isSuccess||!s.isSuccess||!r.isSuccess;return(0,o.jsxs)(E,{children:[(0,o.jsx)(G,{onClick:()=>i(),children:(0,o.jsx)(S.X,{size:16,color:p.ZP.colors.white_0})}),(0,o.jsx)(O,{children:"Delegate More"}),(0,o.jsx)(R,{children:!g&&!r.data.isPoolOpen&&"Cycle #".concat(n.data.pox.next_cycle.id," registration has closed - you can increase your delegation for cycle #").concat(n.data.pox.next_cycle.id+1)}),(0,o.jsx)(A.Z,{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.l,children:[(0,o.jsxs)(T.Z,{children:[(0,o.jsxs)(L,{children:[(0,o.jsxs)(q,{children:["Delegated for Cycle #",g?"--":r.data.isPoolOpen?n.data.pox.current_cycle.id:n.data.pox.current_cycle.id+1]}),(0,o.jsxs)(M,{children:[g?"--":(0,$.hW)(c.data.lockedAmount)," STX"]}),(0,o.jsx)(q,{children:"~ $".concat(g?0:a.data.stxToFiat(c.data.lockedAmount).toFixed(2)," USD")})]}),(0,o.jsxs)(L,{children:[(0,o.jsx)(q,{children:"Not Delegated"}),(0,o.jsxs)(M,{children:[g?"--":(0,$.hW)(s.data.availableBalance)," ","STX"]}),(0,o.jsx)(q,{children:"~ $".concat(g?0:a.data.stxToFiat(s.data.availableBalance).toFixed(2)," USD")})]})]}),(0,o.jsx)("form",{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.l,children:[(0,o.jsxs)(W,{children:[(0,o.jsx)("label",{className:"stacking-label",htmlFor:"stxAmount",children:"Additional Delegation Amount"}),(0,o.jsx)(I.Qr,{control:d,name:"stxAmount",rules:{required:"STX amount is required",validate:e=>(function(e,t){let i=new P.Z(e),o=i.isGreaterThan(t)||i.plus(m.XU).isGreaterThan(t);return i.isEqualTo(0)?"Amount cannot be zero":!o||"Insufficient balance"})(e,s.data.availableBalance)},render:e=>{var t;let{field:i,fieldState:n}=e;return(0,o.jsx)(Q.z,{...i,id:"stxAmount",placeholder:"Enter STX amount",type:"number",min:0,errorMessage:null===(t=n.error)||void 0===t?void 0:t.message})}}),(0,o.jsxs)(T.Z,{gap:"2px",children:[(0,o.jsx)("span",{className:"stacking-caption",children:"~ $".concat(a.isSuccess&&""!==x("stxAmount")?(0,$.wB)(a.data.stxToFiat((0,P.Z)(parseFloat(x("stxAmount")))).toNumber()):0)}),(0,o.jsx)("span",{className:"stacking-caption",children:"USD"})]})]}),(0,o.jsxs)(U,{children:["You will stack a total of"," ",g?"--":Number(x("stxAmount"))+c.data.lockedAmount.toNumber()," ","STX for cycle #",g?"--":r.data.isPoolOpen?n.data.pox.next_cycle.id:n.data.pox.next_cycle.id+1,".",(0,o.jsx)("br",{}),(0,o.jsx)("br",{}),"BTC rewards will be sent to ",null===(t=c.data)||void 0===t?void 0:t.userPoxAddress,"."]}),(0,o.jsxs)(T.Z,{gap:e=>e.space.s,justify:"space-between",children:[(0,o.jsx)(h.kq,{onClick:i,children:"Back"}),(0,o.jsx)(h.zx,{disabled:""===x("stxAmount"),onClick:u(e=>{var t;let o=null===(t=c.data)||void 0===t?void 0:t.userPoxAddress;if(!o)throw Error("Missing user PoX address");let n=new P.Z(parseFloat(e.stxAmount)),a=s.data.lockedAmount.plus(n);l.mutate({amount:a,rewardAddress:o},{onSuccess:()=>{z.ZP.success("Additional delegation amount submitted"),i()}})}),isLoading:l.isPending,children:"Confirm"})]})]})})]})})]})},H=i(8658),J=i(82636);function K(e,t){return e+Math.round(255*Math.min(Math.max(null!=t?t:1,0),1)).toString(16).toUpperCase()}let V={text:{[m.QQ.Pending]:"Pending delegation",[m.QQ.Delegated]:"Delegation confirmed",[m.QQ.Locked]:"Locked & awaiting cycle start",[m.QQ.Stacking]:"Generating rewards",[m.QQ.Revoked]:"Unlocks in "},chipColor:{[m.QQ.Pending]:p.ZP.colors.caution_800,[m.QQ.Delegated]:"#55B6E026",[m.QQ.Locked]:K(p.ZP.colors.success_light,.15),[m.QQ.Stacking]:K(p.ZP.colors.success_light,.15),[m.QQ.Revoked]:"#846DD626"},circleColor:{[m.QQ.Pending]:p.ZP.colors.caution,[m.QQ.Delegated]:"#55B6E0",[m.QQ.Locked]:p.ZP.colors.success_light,[m.QQ.Stacking]:p.ZP.colors.success_light,[m.QQ.Revoked]:"#846DD6"}},ee=n.zo.div.withConfig({componentId:"sc-41597b91-0"})(["display:inline-flex;gap:",";align-items:center;padding:6px 10px;border-radius:","px;background-color:",";",""],e=>e.theme.space.xxs,e=>e.theme.radius(8),e=>e.$backgroundColor,e=>e.theme.typography.body_medium_s),et=n.zo.div.withConfig({componentId:"sc-41597b91-1"})(["display:inline-block;width:6px;height:6px;border-radius:","px;background-color:",";"],e=>e.theme.radius(100),e=>e.$color);var ei=e=>{let{delegationStatus:t}=e,i=(0,F.m$)();return i.isSuccess?(0,o.jsx)("div",{children:(0,o.jsxs)(ee,{$backgroundColor:V.chipColor[t],children:[(0,o.jsx)(et,{$color:V.circleColor[t]}),t===m.QQ.Revoked?"".concat(V.text[t]," ").concat((0,J.EF)(i.data)):V.text[t]]})}):null};let eo=n.zo.div.withConfig({componentId:"sc-eb1fc33d-0"})(["",""],e=>e.theme.typography.body_medium_l),en=(0,n.zo)(A.Z).withConfig({componentId:"sc-eb1fc33d-1"})(["padding:",";background-color:",";border-radius:","px;"],e=>e.theme.space.m,e=>e.theme.colors.elevation2,e=>e.theme.radius(3)),es=n.zo.div.withConfig({componentId:"sc-eb1fc33d-2"})([""," color:",";span{color:",";}"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400,e=>e.theme.colors.white_0),ea=n.zo.div.withConfig({componentId:"sc-eb1fc33d-3"})(["",";"],e=>e.theme.typography.headline_m),ec=(0,n.zo)(h.kq).withConfig({componentId:"sc-eb1fc33d-4"})(["height:36px;width:165px;padding:4px 0px;border-radius:","px;&:disabled{background-color:initial;color:",";border-color:",";svg{color:"," !important;}}&:hover:disabled{background-color:initial;color:",";border-color:",";}"],e=>e.theme.radius(2),e=>e.theme.colors.white_400,e=>e.theme.colors.white_900,e=>e.theme.colors.white_400,e=>e.theme.colors.white_400,e=>e.theme.colors.white_900);var er=e=>{var t,i;let{onDelegateMore:n}=e,s=(0,F.m$)(),a=(0,X.T)(),c=(0,B.FB)(),r=(0,F.W4)(),l=(0,D.J)(),d=!s.isSuccess||!a.isSuccess||!c.isSuccess||!r.isSuccess||!l.isSuccess,h=!!a.isSuccess&&a.data.delegatedAmount.gt(a.data.lockedAmount.plus(1)),p=a.isSuccess&&h?a.data.delegatedAmount.minus(a.data.lockedAmount):null,u=!c.isSuccess||c.data.availableBalance.isEqualTo(new P.Z(0));return(0,o.jsx)(A.Z,{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.m,children:[(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsx)(eo,{children:"Balance"}),!d&&(0,o.jsxs)(ec,{disabled:(u||h)&&l.data.isPoolOpen,onClick:n,children:[(0,o.jsx)(H.v,{size:16,style:{marginRight:8,color:"white"}}),"Delegate more"]})]}),!d&&h&&p&&(0,o.jsx)(en,{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.xs,children:[(0,o.jsxs)(T.Z,{align:"center",justify:"space-between",children:[(0,o.jsx)(ei,{delegationStatus:(t=a.data.hasPendingDelegate,i=l.data.isPoolOpen,t?m.QQ.Pending:i?m.QQ.Delegated:m.QQ.Locked)}),(0,o.jsx)(es,{children:l.data.isPoolOpen?(0,o.jsxs)(o.Fragment,{children:["Cycle ",(0,o.jsxs)("span",{children:["#",s.data.pox.next_cycle.id]})," starts in"," ",(0,o.jsxs)("span",{children:["~",(0,J.EF)(s.data)]})]}):(0,o.jsxs)(o.Fragment,{children:["Cycle ",(0,o.jsxs)("span",{children:["#",s.data.pox.next_cycle.id+1]})," starts in"," ",(0,o.jsxs)("span",{children:["~",(0,J.NW)(s.data)]})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(es,{children:"Additional delegation amount"}),(0,o.jsxs)(T.Z,{gap:e=>e.space.xxs,align:"baseline",children:[(0,o.jsxs)(ea,{children:[(0,$.hW)(p)," STX"]}),(0,o.jsx)(es,{children:"~ $".concat(r.data.stxToFiat(p).toFixed(2)," USD")})]})]})]})}),(0,o.jsxs)(en,{children:[(0,o.jsx)(es,{children:"Not delegated"}),(0,o.jsxs)(T.Z,{gap:e=>e.space.xxs,align:"baseline",children:[(0,o.jsxs)(ea,{children:[d?"--":(0,$.hW)(c.data.availableBalance)," STX"]}),(0,o.jsx)(es,{children:"$".concat(d?0:r.data.stxToFiat(c.data.availableBalance).toFixed(2)," USD")})]})]})]})})},el=i(2447),ed=i(75417),eh=i(80599),ep=i(42437);let em=n.zo.div.withConfig({componentId:"sc-ce243f6f-0"})(["",""],e=>e.theme.typography.body_medium_l),eu=(0,n.zo)(A.Z).withConfig({componentId:"sc-ce243f6f-1"})(["padding:",";background-color:",";border-radius:","px;"],e=>e.theme.space.m,e=>e.theme.colors.elevation2,e=>e.theme.radius(3)),ex=n.zo.div.withConfig({componentId:"sc-ce243f6f-2"})([""," color:",";span{color:",";}"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400,e=>e.theme.colors.white_0),eg=n.zo.div.withConfig({componentId:"sc-ce243f6f-3"})(["",";"],e=>e.theme.typography.headline_m),ew=(0,n.zo)(h.kq).withConfig({componentId:"sc-ce243f6f-4"})(["height:36px;width:165px;padding:4px 0px;border-radius:","px;"],e=>e.theme.radius(2));var ef=()=>{let[e,t]=(0,d.useState)(!1),i=(0,F.m$)(),n=(0,X.T)(),s=(0,B.FB)(),a=(0,F.W4)(),c=(0,D.J)(),r=(0,x.n)(),l=(0,N.q_)(),u=!i.isSuccess||!n.isSuccess||!s.isSuccess||!a.isSuccess||!c.isSuccess||!r.isSuccess,g=i.data&&i.data.pools.length>0?i.data.pools[0].estimated_yield.toString():"~10";return(0,o.jsxs)(A.Z,{children:[!u&&(0,o.jsx)(eh.Yy,{isOpen:e,onClose:()=>t(!1),title:"Unlock STX",description:(0,o.jsxs)(o.Fragment,{children:["You are about to unlock your STX. Your STX will be available again at the end of cycle #",i.data.pox.current_cycle.id,", in approximately"," ",(0,J.EF)(i.data),". ",(0,o.jsx)("br",{}),(0,o.jsx)("br",{})," You will still earn rewards for this cycle."]}),leftButton:(0,o.jsx)(h.kq,{onClick:()=>t(!1),children:"Back"}),rightButton:(0,o.jsx)(h.zx,{onClick:()=>{t(!1),l.mutate()},children:"Continue"})}),(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.m,children:[(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsx)(em,{children:"Earning"}),(0,o.jsxs)(ew,{onClick:()=>t(!0),children:[(0,o.jsx)(el.w,{size:16,style:{marginRight:8,color:"white"},weight:"fill"}),"Unlock"]})]}),(0,o.jsx)(T.Z,{direction:"column",gap:e=>e.space.s,children:(0,o.jsx)(eu,{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.m,children:[(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.xs,children:[(0,o.jsxs)(T.Z,{align:"center",justify:"space-between",children:[u||r.data!==m.QQ.Revoked?(0,o.jsx)(ei,{delegationStatus:m.QQ.Stacking}):(0,o.jsxs)(T.Z,{gap:e=>e.space.xs,children:[(0,o.jsx)(ei,{delegationStatus:m.QQ.Stacking})," ",(0,o.jsx)(ei,{delegationStatus:m.QQ.Revoked})]}),(0,o.jsx)(ex,{children:u?"--":r.data===m.QQ.Revoked?(0,o.jsxs)(o.Fragment,{children:["Cycle ",(0,o.jsxs)("span",{children:["#",i.data.pox.current_cycle.id]})]}):(0,o.jsxs)(o.Fragment,{children:["Cycle ",(0,o.jsxs)("span",{children:["#",i.data.pox.current_cycle.id]})," Ends in"," ",(0,o.jsxs)("span",{children:["~",(0,J.EF)(i.data)]})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(ex,{children:"Stacked Amount"}),(0,o.jsxs)(T.Z,{gap:e=>e.space.xxs,align:"baseline",children:[(0,o.jsxs)(eg,{children:[u?"--":(0,$.hW)(n.data.lockedAmount)," ","STX"]}),(0,o.jsx)(ex,{children:"~ $".concat(u?0:a.data.stxToFiat(n.data.lockedAmount).toFixed(2)," USD")})]})]})]}),(0,o.jsxs)("div",{children:[(0,o.jsx)(ex,{children:"Est. APY"}),(0,o.jsxs)(eg,{children:[u?"--":g,"%"]}),(0,o.jsx)(ex,{children:(0,o.jsxs)(T.Z,{align:"center",gap:e=>e.space.xxs,children:["Including Commission",(0,o.jsx)(ep.Z,{text:(0,o.jsxs)("ul",{style:{padding:"0px 14px"},children:[(0,o.jsx)("li",{children:"Gross yield - 10%"}),(0,o.jsx)("li",{children:"Xverse commission - 4.95%"}),(0,o.jsx)("li",{children:"Net yield - 9.505%"}),(0,o.jsx)("li",{children:"APY rates may vary depending on network conditions, the total STX being stacked, and the price difference between STX and BTC."})]}),children:(0,o.jsx)(ed.k,{weight:"fill",size:16,fill:p.ZP.colors.white_200})})]})})]})]})})})]})]})},ej=i(32407);let eb=n.ZP.div.withConfig({componentId:"sc-ef9c7a0d-0"})([""]),ey=n.ZP.div.withConfig({componentId:"sc-ef9c7a0d-1"})([""," padding-bottom:20px;"],e=>e.theme.typography.body_medium_l),ev=n.ZP.div.withConfig({componentId:"sc-ef9c7a0d-2"})(["border-bottom:1px solid ",";padding-top:20px;padding-bottom:20px;&:last-child{padding-bottom:0;border-bottom:none;}&:first-child{border-bottom:none;}"],e=>e.theme.colors.white_900),ek=n.ZP.div.withConfig({componentId:"sc-ef9c7a0d-3"})([""," display:flex;justify-content:space-between;align-items:center;cursor:pointer;"],e=>e.theme.typography.body_medium_m),eC=n.ZP.div.withConfig({componentId:"sc-ef9c7a0d-4"})([""," padding-top:20px;"],e=>e.theme.typography.body_m),e_=n.ZP.div.withConfig({componentId:"sc-ef9c7a0d-5"})(["max-height:",";overflow:hidden;transition:max-height 0.3s ease;"],e=>e.$isOpen?e.$maxHeight:"0"),eZ=n.ZP.button.withConfig({componentId:"sc-ef9c7a0d-6"})(["background:none;border:none;cursor:pointer;color:",";"],e=>e.theme.colors.white_0),eS=e=>{let{title:t,itemPairs:i}=e,[n,s]=(0,d.useState)(null),[a,c]=(0,d.useState)("0px"),r=(0,d.useRef)(null),l=e=>{s(n===e?null:e)};return(0,d.useEffect)(()=>{if(r.current){let e=r.current.scrollHeight;c("".concat(e,"px"))}},[n]),(0,o.jsxs)(eb,{children:[(0,o.jsx)(ey,{children:t}),i.map((e,t)=>(0,o.jsxs)(ev,{children:[(0,o.jsxs)(ek,{onClick:()=>l(t),children:[e.summary,(0,o.jsx)(eZ,{children:n===t?(0,o.jsx)(ej.W,{size:16}):(0,o.jsx)(H.v,{size:16})})]}),(0,o.jsx)(e_,{ref:n===t?r:null,$isOpen:n===t,$maxHeight:a,children:(0,o.jsx)(eC,{children:e.details})})]},t))]})};var eP=()=>(0,o.jsx)(A.Z,{children:(0,o.jsx)(eS,{title:"Frequently Asked Questions",itemPairs:[{summary:"What is stacking?",details:"Stacking is the process of locking up STX tokens to support the network’s security and consensus mechanism, earning BTC rewards in return.\xa0"},{summary:"Why stack with Xverse?",details:"Xverse Pool is a trusted and reliable pool service built by the Xverse wallet team, allowing users to earn up to 10% Bitcoin yield."},{summary:"What happens to my STX once I delegate to the pool?",details:"Once delegated, your funds will be registered for stacking in the upcoming cycle. Registration closes 100-200 blocks before the cycle starts or when all stacking slots are filled. At this stage, your funds still remain available in your wallet."},{summary:"When will I start generating rewards?",details:"Once the stacking cycle begins, your funds will be locked and generating rewards."},{summary:"When will rewards be distributed?",details:"Rewards will be distributed at the conclusion of each cycle. Please note although we aim to distribute rewards as early as possible but sometimes this process can take 2-3 days after cycle ends."},{summary:"How to set stacking frequency with Xverse?",details:"With the Xverse pool, you don’t need to set your stacking frequency as your funds are automatically registered for the next cycle unless you manually revoke your delegation. Once you delegate and lock your funds for the first cycle, they will remain locked for subsequent cycles without any additional action."},{summary:"When will my funds be unlocked if I stop stacking?",details:"By selecting 'Unlock', you are revoking your delegation to the Xverse pool for the next cycle. Your funds will remain locked for the current cycle and will be unlocked at its conclusion (100 blocks after the cycle ends, approximately 1 day)."}]})}),eI=i(14212),ez=i(83850),eA=i(78551),eT=i(12169);let eQ=i(87066).default.create({baseURL:"/api"});var eB=async function(e){return(await eQ.get("/stacking-rewards",{params:{stacksAddress:e}})).data},eN=i(14099),eF=i(64715),eX=i(24251),e$=i(55400);let eD=n.ZP.div.withConfig({componentId:"sc-19c5a086-0"})(["",";color:",";"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.success_light),eE=n.ZP.div.withConfig({componentId:"sc-19c5a086-1"})([""," color:",";"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400),eO=e=>{let{cycleNumber:t,cycleRewardBtc:i}=e;return(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsxs)(eE,{children:["Cycle #",t]}),(0,o.jsxs)(eD,{children:["+ ",i," BTC"]})]})},eR=e=>{let{data:t,cutoff:i}=e,n=i?t.slice(0,i):t;return(0,o.jsx)(T.Z,{direction:"column",style:{rowGap:16},children:n.map(e=>(0,o.jsx)(eO,{cycleNumber:e.cycleNumber,cycleRewardBtc:e.cycleRewardBtc},e.cycleNumber))})};var eL=e=>{let{data:t}=e,[i,n]=(0,d.useState)(!1),s=[...t].sort((e,t)=>t.cycleNumber-e.cycleNumber),a=[...1===s.length?[{...s[0]},{...s[0],cycleNumber:s[0].cycleNumber+1}]:s].reverse().map(e=>({x:e.cycleNumber,y:e.cycleRewardBtc}));return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eF.h,{height:104,width:"100%",children:(0,o.jsxs)(eX.T,{data:a,margin:{top:8,right:0,left:0,bottom:0},children:[(0,o.jsx)("defs",{children:(0,o.jsxs)("linearGradient",{id:"areaGradient",x1:"0",y1:"0",x2:"0",y2:"1",children:[(0,o.jsx)("stop",{offset:"0%",stopColor:p.ZP.colors.success_light,stopOpacity:.2}),(0,o.jsx)("stop",{offset:"60%",stopColor:p.ZP.colors.success_light,stopOpacity:0})]})}),(0,o.jsx)(e$.u,{type:"monotone",dataKey:"y",stroke:p.ZP.colors.success_light,fillOpacity:1,fill:"url(#areaGradient)",baseValue:"dataMin"})]})}),(0,o.jsx)(eR,{data:s,cutoff:i?void 0:3}),s.length>3&&(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(eN.VT,{$gap:32}),(0,o.jsxs)(h.kq,{onClick:()=>n(e=>!e),children:[i?"Hide":"Show"," full reward history"]})]})]})};let eq=n.zo.div.withConfig({componentId:"sc-b7524318-0"})([""," padding-bottom:20px;"],e=>e.theme.typography.body_medium_l),eM=n.zo.div.withConfig({componentId:"sc-b7524318-1"})([""," color:",";"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400),eW=n.zo.div.withConfig({componentId:"sc-b7524318-2"})(["",";color:",";"],e=>e.theme.typography.headline_m,e=>e.theme.colors.success_light),eU=n.zo.div.withConfig({componentId:"sc-b7524318-3"})(["",";"],e=>e.theme.typography.body_medium_m);var eG=()=>{var e;let t=(0,eI.X)(e=>e.stacksAddress),i=(0,eI.X)(e=>e.paymentAddress),n=(0,eA.a)({queryKey:[eT.SA.stackingRewards,t],queryFn:()=>eB(t)}),s=(0,F.W4)(),a=n.isSuccess?n.data.map(e=>({cycleNumber:e.cycle,cycleRewardBtc:(0,ez.KB)(Number(e.amountSats)).toNumber()})):[],c=n.isSuccess?n.data.reduce((e,t)=>e+(0,ez.KB)(Number(t.amountSats)).toNumber(),0):0,r=n.isSuccess?n.data.length:0,l=!s.isSuccess||!n.isSuccess;return(0,o.jsxs)(A.Z,{children:[(0,o.jsx)(eq,{children:"Rewards"}),(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.m,children:[(0,o.jsxs)("div",{children:[(0,o.jsxs)(T.Z,{align:"center",gap:e=>e.space.xxs,children:[(0,o.jsx)(eM,{children:"Total generated rewards"}),(0,o.jsx)(ep.Z,{text:"Total rewards earned since you first started stacking.",children:(0,o.jsx)(ed.k,{weight:"fill",size:16,fill:p.ZP.colors.white_200})})]}),(0,o.jsxs)(eW,{children:[c," BTC"]}),(0,o.jsxs)(eM,{children:["$",l?0:(0,$.ZP)(s.data.btcToFiat(new P.Z(c)).toNumber())," ","USD"]})]}),(0,o.jsx)(eU,{children:"Rewards are distributed to your registered Bitcoin address at the end of each cycle."}),(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsx)(eM,{children:"Completed Cycles"}),(0,o.jsx)(eU,{children:r})]}),(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsx)(eM,{children:"Reward Address"}),(0,o.jsx)(eU,{children:l?"--":0===(e=n.data).length?(0,ez.b_)(i,6):(0,ez.b_)(e[0].payoutAddress,6)})]}),(0,o.jsx)(T.Z,{direction:"column",children:a&&a.length>0&&(0,o.jsx)(eL,{data:a})})]})]})};let eY=n.zo.div.withConfig({componentId:"sc-5bb998a-0"})(["display:grid;gap:16px;grid-template-areas:'d' 'a' 'b' 'c';@media ","{grid-template-areas:'a d' 'b d' 'c d';}"],p.Hb.min.lg);var eH=()=>{let[e,t]=(0,d.useState)(!1);return e?(0,o.jsx)(Y,{onCancel:()=>t(!1)}):(0,o.jsxs)(eY,{children:[(0,o.jsx)("div",{style:{gridArea:"a"},children:(0,o.jsx)(ef,{})}),(0,o.jsx)("div",{style:{gridArea:"b"},children:(0,o.jsx)(er,{onDelegateMore:()=>t(!0)})}),(0,o.jsx)("div",{style:{gridArea:"c"},children:(0,o.jsx)(eP,{})}),(0,o.jsx)("div",{style:{gridArea:"d"},children:(0,o.jsx)(eG,{})})]})},eJ=i(87882),eK=i(81945),eV=i(41664),e0=i.n(eV);let e1=n.zo.div.withConfig({componentId:"sc-f7a6374b-0"})(["",""],e=>e.theme.typography.body_medium_l),e6=(0,n.zo)(A.Z).withConfig({componentId:"sc-f7a6374b-1"})(["padding:",";background-color:",";border-radius:","px;"],e=>e.theme.space.m,e=>e.theme.colors.elevation2,e=>e.theme.radius(3)),e2=n.zo.div.withConfig({componentId:"sc-f7a6374b-2"})([""," color:",";span{color:",";}"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400,e=>e.theme.colors.white_0),e7=(0,n.zo)(h.kq).withConfig({componentId:"sc-f7a6374b-3"})(["height:36px;padding:4px 22px;border-radius:","px;"],e=>e.theme.radius(2)),e3=n.zo.div.withConfig({componentId:"sc-f7a6374b-4"})(["",";"],e=>e.theme.typography.headline_m);var e4=e=>{let{pendingStackingState:t}=e,[i,n]=(0,d.useState)(!1),s=(0,F.m$)(),a=(0,X.T)(),c=(0,B.FB)(),r=(0,F.W4)(),l=(0,D.J)(),u=(0,N.q_)(),x=!s.isSuccess||!a.isSuccess||!r.isSuccess||!c.isSuccess||!l.isSuccess,g=x?new P.Z(0):c.data.availableBalance.minus(a.data.delegatedAmount);return(0,o.jsxs)(A.Z,{children:[(0,o.jsx)(eh.Yy,{isOpen:i,onClose:()=>n(!1),title:"Cancel delegation",description:"You’re about to cancel your stacking delegation. Do you want to continue?",leftButton:(0,o.jsx)(h.kq,{onClick:()=>n(!1),children:"Back"}),rightButton:(0,o.jsx)(h.zx,{onClick:()=>{n(!1),u.mutate(void 0,{onSuccess:()=>{z.ZP.success("Delegation canceled. Your full STX balance is available.")}})},children:"Continue"})}),(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.m,children:[(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsx)(e1,{children:"Balance"}),(0,o.jsxs)(T.Z,{gap:e=>e.space.xs,style:{visibility:t===m.QQ.Delegated?"visible":"hidden"},children:[(0,o.jsx)(e0(),{href:"/earn/stacking/modify-delegation",children:(0,o.jsxs)(e7,{children:[(0,o.jsx)(eJ.k,{size:16,style:{marginRight:8}}),"Modify"]})}),(0,o.jsxs)(e7,{isLoading:u.isPending,onClick:()=>n(!0),children:[(0,o.jsx)(eK.q,{size:16,style:{marginRight:8}}),"Cancel"]})]})]}),(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.s,children:[(0,o.jsx)(e6,{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.xs,children:[(0,o.jsxs)(T.Z,{align:"center",justify:"space-between",children:[!x&&(0,o.jsx)(ei,{delegationStatus:t}),(0,o.jsx)(e2,{children:x?"--":(0,o.jsxs)(o.Fragment,{children:["Cycle ",(0,o.jsxs)("span",{children:["#",s.data.pox.next_cycle.id]})," Starts in"," ",(0,o.jsxs)("span",{children:["~",(0,J.EF)(s.data)]})]})})]}),(0,o.jsxs)("div",{children:[(0,o.jsxs)(T.Z,{gap:e=>e.space.xxs,align:"center",children:[(0,o.jsx)(e2,{children:"Delegated"}),(0,o.jsx)(ep.Z,{text:"Ensure the full amount you wish to delegate remains in your wallet.",children:(0,o.jsx)(ed.k,{weight:"fill",size:16,fill:p.ZP.colors.white_200})})]}),(0,o.jsxs)(T.Z,{gap:e=>e.space.xxs,align:"baseline",children:[(0,o.jsxs)(e3,{children:[x?"--":(0,$.hW)(a.data.delegatedAmount)," ","STX"]}),(0,o.jsx)(e2,{children:"~ $".concat(x?0:r.data.stxToFiat(a.data.delegatedAmount).toFixed(2)," USD")})]})]})]})}),(0,o.jsxs)(e6,{children:[(0,o.jsx)(e2,{children:"Not Delegated"}),(0,o.jsxs)(T.Z,{gap:e=>e.space.xxs,align:"baseline",children:[(0,o.jsxs)(e3,{children:[x?"--":(0,$.hW)(g)," STX"]}),(0,o.jsx)(e2,{children:"~ $".concat(x?0:r.data.stxToFiat(g).toFixed(2)," USD")})]})]})]})]})]})};let e8=n.zo.div.withConfig({componentId:"sc-4787723d-0"})(["display:grid;gap:16px;grid-template-areas:'c' 'a' 'b';@media ","{grid-template-areas:'a c' 'b c';}"],p.Hb.min.lg);var e5=e=>{let{pendingStackingState:t}=e;return(0,o.jsxs)(e8,{children:[(0,o.jsx)("div",{style:{gridArea:"a"},children:(0,o.jsx)(e4,{pendingStackingState:t})}),(0,o.jsx)("div",{style:{gridArea:"b"},children:(0,o.jsx)(eP,{})}),(0,o.jsx)("div",{style:{gridArea:"c"},children:(0,o.jsx)(eG,{})})]})};let e9=n.ZP.div.withConfig({componentId:"sc-1c97ea77-0"})(["display:flex;flex-direction:column;@media (min-width:768px){flex-direction:row;}"]),te=n.ZP.div.withConfig({componentId:"sc-1c97ea77-1"})(["flex:1;padding-left:0;padding-right:",";padding-bottom:",";text-align:left;&:last-child{border-bottom:none;padding-bottom:0;}@media (min-width:768px){border-bottom:none;border-right:1px solid ",";padding-left:",";padding-top:0;padding-bottom:0;&:first-child{padding-left:0;}&:last-child{padding-right:0;border-right:none;}}"],e=>e.theme.space.l,e=>e.theme.space.l,e=>e.theme.colors.white_900,e=>e.theme.space.l),tt=n.ZP.div.withConfig({componentId:"sc-1c97ea77-2"})(["",";color:",";display:flex;align-items:center;"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400),ti=n.ZP.div.withConfig({componentId:"sc-1c97ea77-3"})(["",";white-space:nowrap;width:",";"],e=>e.theme.typography.headline_m,e=>e.$width?"".concat(e.$width,"px"):"auto"),to=(0,n.ZP)(ti).withConfig({componentId:"sc-1c97ea77-4"})(["color:",";"],e=>e.theme.colors.success_light),tn=(0,n.ZP)(A.Z).withConfig({componentId:"sc-1c97ea77-5"})(["padding-bottom:",";"],e=>e.theme.space.l);var ts=()=>{var e;let t=(0,F.dd)(),i=(0,F.m$)(),n=(0,F.Op)(),s=(0,F.W4)(),a=(0,d.useRef)(null),c=null===(e=a.current)||void 0===e?void 0:e.clientWidth,r=i.data&&i.data.pools.length>0?i.data.pools[0].estimated_yield.toString():"~10",l=t.isLoading||!t.data||i.isLoading||!i.data||n.isLoading||!n.data||s.isLoading||!s.data;return(0,o.jsx)(tn,{children:(0,o.jsxs)(e9,{children:[(0,o.jsxs)(te,{children:[(0,o.jsx)(tt,{children:"Stacked This Cycle"}),(0,o.jsx)(ti,{ref:a,children:l?"--":"".concat((0,$.wB)(t.data.poolStxLocked.totalStxLocked)," STX")}),(0,o.jsx)(tt,{children:l?"--":"~ $".concat((0,$.wB)(s.data.stxToFiat(new P.Z(t.data.poolStxLocked.totalStxLocked)).toNumber())," USD")})]}),(0,o.jsxs)(te,{children:[(0,o.jsx)(tt,{children:"Stackers"}),(0,o.jsx)(ti,{$width:c,children:l?"--":n.data.toLocaleString()})]}),(0,o.jsxs)(te,{children:[(0,o.jsx)(tt,{children:"Est. APY"}),(0,o.jsx)(to,{$width:c,children:l?"--":"".concat(r,"%")}),(0,o.jsx)(tt,{children:(0,o.jsxs)(T.Z,{align:"center",gap:e=>e.space.xxs,children:["Including Commission",(0,o.jsx)(ep.Z,{text:(0,o.jsxs)("ul",{style:{padding:"0px 14px"},children:[(0,o.jsxs)("li",{children:["Gross yield - ",l?"--":"".concat(r,"%")]}),(0,o.jsx)("li",{children:"Xverse commission - 4.95%"}),(0,o.jsxs)("li",{children:["Net yield - ",l?"--":"9.505%"]}),(0,o.jsx)("li",{children:"APY rates may vary depending on network conditions, the total STX being stacked, and the price difference between STX and BTC."})]}),children:(0,o.jsx)(ed.k,{weight:"fill",size:16,fill:p.ZP.colors.white_200})})]})})]})]})})},ta=i(46283),tc=i(46877),tr=i(83252),tl=i(30202),td=e=>{let{value:t}=e,i=(0,$.VG)(t,{display:"simplified",isBitcoin:!0});if(i.includes("**")){let[e,t,n]=i.split("**");return(0,o.jsxs)("span",{children:[e,(0,o.jsx)("span",{style:{fontSize:"0.7em",position:"relative",top:"3px"},children:t}),n]})}return(0,o.jsx)("span",{children:i})},th=i(5798),tp=i(66691),tm=i(75343),tu=i(10441);let tx=(0,n.zo)(eh.oA).withConfig({componentId:"sc-f32e91a1-0"})(["padding:20px 16px 40px;background-color:",";text-align:left;border:1px solid ",";input{&::-webkit-inner-spin-button{-webkit-appearance:none;margin:0;}&::-webkit-outer-spin-button{-webkit-appearance:none;margin:0;}}"],e=>e.theme.colors.elevation1,e=>e.theme.colors.white_900),tg=n.zo.div.withConfig({componentId:"sc-f32e91a1-1"})(["",""],e=>e.theme.typography.body_bold_m),tw=(0,n.zo)(Q.z).withConfig({componentId:"sc-f32e91a1-2"})(["input{background-color:",";}"],e=>e.theme.colors.elevation0),tf=n.zo.div.withConfig({componentId:"sc-f32e91a1-3"})(["color:",";"],e=>e.theme.colors.white_200),tj=(0,n.zo)(Q.z).withConfig({componentId:"sc-f32e91a1-4"})(["input{margin:0;width:64px;height:36px;color:",";background-color:",";}"],e=>e.theme.colors.white_200,e=>e.theme.colors.elevation0),tb=n.zo.div.withConfig({componentId:"sc-f32e91a1-5"})(["width:100%;margin-left:8px;"]),ty=(0,n.zo)(A.Z).withConfig({componentId:"sc-f32e91a1-6"})(["padding:",";background-color:",";border-radius:","px;"],e=>e.theme.space.m,e=>e.theme.colors.elevation2,e=>e.theme.radius(2)),tv=n.zo.div.withConfig({componentId:"sc-f32e91a1-7"})(["",";max-width:215px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],e=>e.theme.typography.headline_xs),tk=n.zo.div.withConfig({componentId:"sc-f32e91a1-8"})([""," color:",";max-width:215px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_400),tC=n.zo.div.withConfig({componentId:"sc-f32e91a1-9"})([""," color:",";"],e=>e.theme.typography.body_medium_s,e=>e.theme.colors.white_200),t_=n.zo.button.withConfig({componentId:"sc-f32e91a1-10"})(["",";color:",";width:100%;border:1px solid ",";padding:",";background-color:#1f1f1f;border-radius:","px;&:hover{border-color:",";}"],e=>e.theme.typography.body_medium_m,e=>e.theme.colors.white_0,e=>e.theme.colors.white_900,e=>e.theme.space.m,e=>e.theme.radius(2),e=>e.theme.colors.white_600);var tZ=()=>{var e,t;let i=(0,F.m$)(),n=(0,F.W4)(),[s,a]=(0,d.useState)(!1),[c,r]=(0,d.useState)(1),[l,h]=(0,d.useState)(""),m=i.data&&i.data.pools.length>0?i.data.pools[0].estimated_yield/100:.1,u=Number(l)*c*(Math.pow(1+m,.038461538461538464)-1),x=null===(e=n.data)||void 0===e?void 0:e.stxToBtc(new P.Z(u)),g=null===(t=n.data)||void 0===t?void 0:t.stxToFiat(new P.Z(u));return(0,o.jsxs)("div",{children:[(0,o.jsx)(tx,{isOpen:s,style:{overlay:{zIndex:2,backgroundColor:p.ZP.colors.elevation0_150}},onRequestClose:()=>a(!1),children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.l,children:[(0,o.jsxs)(T.Z,{justify:"space-between",align:"center",children:[(0,o.jsx)(tg,{children:"Rewards Calculator"}),(0,o.jsx)(eh.PZ,{onClick:()=>a(!1),children:(0,o.jsx)(tp.a,{size:24,weight:"fill",color:p.ZP.colors.white_0})})]}),(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.m,children:[(0,o.jsxs)(tQ,{children:[(0,o.jsx)(T.Z,{align:"center",gap:e=>e.space.xxs,children:(0,o.jsx)("label",{className:"stacking-label",htmlFor:"stackingAmount",children:"Amount of STX to stack"})}),(0,o.jsx)(tw,{id:"stackingAmount",placeholder:"Enter STX amount",type:"number",min:0,value:l,onChange:e=>h(e.target.value)}),(0,o.jsxs)(T.Z,{gap:"2px",children:[(0,o.jsx)("span",{className:"stacking-caption stacking-caption-wrap",children:"~ $".concat(n.isSuccess&&0!==Number(l)?(0,$.VG)(n.data.stxToFiat((0,P.Z)(l)).toNumber(),{display:"truncated",isFiat:!0}):0)}),(0,o.jsx)("span",{className:"stacking-caption",children:"USD"})]})]}),(0,o.jsx)(tf,{children:"Number of stacking cycles (~2 weeks)"}),(0,o.jsxs)(T.Z,{gap:e=>e.space.m,align:"center",children:[(0,o.jsx)(tb,{children:(0,o.jsx)(th.Z,{min:0,max:100,value:c,onChange:e=>r(e)})}),(0,o.jsx)(tj,{type:"number",min:0,max:100,value:c.toString(),onChange:e=>{let{value:t,min:i,max:o}=e.target;r(Math.max(Number(i),Math.min(Number(o),Number(t))))}})]}),(0,o.jsx)(ty,{children:(0,o.jsxs)(T.Z,{justify:"space-between",children:[(0,o.jsx)("div",{children:"Est. rewards"}),(0,o.jsxs)("div",{style:{textAlign:"right"},children:[(0,o.jsxs)(tv,{children:[x&&(0,o.jsx)(td,{value:x.toNumber()})," BTC"]}),g&&(0,o.jsxs)(tk,{children:[g.isGreaterThan(0)&&"~"," $",(0,$.VG)(g.toNumber(),{display:"truncated",isFiat:!0})," ","USD"]})]})]})}),(0,o.jsx)(tC,{children:"Actual rewards may vary depending on network conditions and staking participation."})]})]})}),(0,o.jsx)(t_,{onClick:()=>a(!0),children:(0,o.jsxs)(T.Z,{align:"center",justify:"space-between",children:[(0,o.jsxs)(T.Z,{align:"center",gap:e=>e.space.xs,children:[(0,o.jsx)(tm.M,{size:24}),(0,o.jsx)("div",{children:"Rewards Calculator"})]}),(0,o.jsx)(tu.T,{size:18})]})})]})},tS=i(11467);let tP=n.ZP.div.withConfig({componentId:"sc-768b018c-0"})([""," margin-bottom:",";"],e=>e.theme.typography.body_medium_l,e=>e.theme.space.xxs),tI=n.ZP.div.withConfig({componentId:"sc-768b018c-1"})(["color:",";"],e=>e.$isOpen?e.theme.colors.success_light:e.theme.colors.danger_light),tz=n.ZP.div.withConfig({componentId:"sc-768b018c-2"})(["color:",";span{color:",";}"],e=>e.theme.colors.white_400,e=>e.theme.colors.white_0),tA=n.ZP.div.withConfig({componentId:"sc-768b018c-3"})(["&:first-child{width:50%;}"]),tT=n.ZP.div.withConfig({componentId:"sc-768b018c-4"})(["color:",";margin-bottom:",";"],e=>e.theme.colors.white_400,e=>e.theme.space.xxs),tQ=n.ZP.div.withConfig({componentId:"sc-768b018c-5"})(["display:flex;flex-direction:column;gap:",";input{color:",";background-color:",";}.stacking-label{color:",";}.stacking-caption{",";color:",";}.stacking-caption-wrap{max-width:150px;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;}"],e=>e.theme.space.xs,e=>e.theme.colors.white_200,e=>e.theme.colors.elevation_n1,e=>e.theme.colors.white_200,e=>e.theme.typography.body_s,e=>e.theme.colors.white_400),tB=n.ZP.div.withConfig({componentId:"sc-768b018c-6"})(["color:",";"],e=>{let{theme:t}=e;return t.colors.white_400}),tN=n.ZP.button.withConfig({componentId:"sc-768b018c-7"})(["background-color:transparent;color:",";padding:",";transition:opacity 0.1s ease;&:hover{opacity:0.8;}&:active{opacity:0.6;}"],e=>{let{theme:t}=e;return t.colors.tangerine},e=>{let{theme:t}=e;return t.space.xxs});var tF=()=>{var e;let t=(0,tl.NL)(),i=(0,eI.X)(e=>e.paymentAddress),n=(0,x.n)(),s=(0,F.m$)(),a=(0,B.FB)(),c=(0,F.W4)(),r=(0,D.J)(),l=(0,tc.g)(),{onConnect:d}=(0,ta.y)(),m=(0,N.GO)(),{control:u,handleSubmit:g,watch:w}=(0,I.cI)({values:{stxAmount:"",rewardAddress:null!=i?i:""}}),f="string"==typeof i,j=!s.isSuccess||!r.isSuccess||!n.isSuccess;return(0,o.jsx)(A.Z,{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.l,children:[(0,o.jsxs)("div",{children:[(0,o.jsx)(tP,{children:"Registration"}),j?"--":(0,o.jsx)(tI,{$isOpen:r.data.isPoolOpen,children:r.data.isPoolOpen?"Open":"Closed"})]}),(0,o.jsxs)(tz,{children:["Registration ",j?"--":r.data.isPoolOpen?"Closes":"Opens"," in"," ",(0,o.jsx)("span",{children:j?"--":"~".concat(r.data.isPoolOpen?(0,J.TJ)(s.data):(0,J.EF)(s.data))})]}),(0,o.jsxs)(T.Z,{children:[(0,o.jsxs)(tA,{children:[(0,o.jsx)(tT,{children:"Locking Time"}),"2-week cycles"]}),(0,o.jsxs)(tA,{children:[(0,o.jsx)(tT,{children:"Stacking Minimum"}),"100 STX"]})]}),(0,o.jsx)(tZ,{}),(null===(e=r.data)||void 0===e?void 0:e.isPoolOpen)&&(0,o.jsx)("form",{children:(0,o.jsxs)(T.Z,{direction:"column",gap:e=>e.space.l,children:[(0,o.jsxs)(tQ,{children:[(0,o.jsxs)(T.Z,{align:"center",gap:e=>e.space.xxs,children:[(0,o.jsx)("label",{className:"stacking-label",htmlFor:"stxAmount",children:"You will stack up to"}),(0,o.jsx)(ep.Z,{text:"We are able to stack up to your delegation amount. However, if your wallet balance is lower than the delegated amount at the time of locking, only the available balance will be stacked.",children:(0,o.jsx)(ed.k,{weight:"fill",size:16,fill:p.ZP.colors.white_200})})]}),(0,o.jsx)(I.Qr,{control:u,name:"stxAmount",rules:{required:"STX amount is required",validate:e=>(0,tS.p)(e,a.data.availableBalance,s.data.pools[0].minimum)},render:e=>{var t;let{field:i,fieldState:n}=e;return(0,o.jsx)(Q.z,{...i,disabled:!f,id:"stxAmount",placeholder:"Enter STX amount",type:"number",min:0,errorMessage:null===(t=n.error)||void 0===t?void 0:t.message})}}),(0,o.jsxs)(T.Z,{gap:"2px",children:[(0,o.jsx)("span",{className:"stacking-caption stacking-caption-wrap",children:"~ $".concat(c.isSuccess&&""!==w("stxAmount")?(0,$.wB)(c.data.stxToFiat((0,P.Z)(parseFloat(w("stxAmount")))).toNumber()):0)}),(0,o.jsx)("span",{className:"stacking-caption",children:"USD"})]})]}),(0,o.jsxs)(tQ,{children:[(0,o.jsx)(T.Z,{justify:"space-between",children:(0,o.jsx)("label",{className:"stacking-label",htmlFor:"rewardAddress",children:"Bitcoin reward address"})}),(0,o.jsx)(I.Qr,{control:u,name:"rewardAddress",rules:{required:"Bitcoin reward address is required"},render:e=>{var t;let{field:i,fieldState:n}=e;return(0,o.jsx)(Q.z,{...i,disabled:!f,id:"rewardAddress",placeholder:"Enter your Bitcoin reward address",errorMessage:null===(t=n.error)||void 0===t?void 0:t.message})}}),(0,o.jsx)("span",{className:"stacking-caption",children:"This is the Bitcoin payment address for this account"})]}),f?(0,o.jsx)(h.zx,{isLoading:m.isPending,onClick:g(e=>{m.mutate({amount:new P.Z(parseFloat(e.stxAmount)),rewardAddress:e.rewardAddress})}),disabled:j||!a.isSuccess||r.isSuccess&&!r.data.poolAvailable||!i,children:"Delegate"}):(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(h.zx,{type:"button",onClick:l?()=>{d(),t.clear()}:tr.P,children:l?"Connect wallet to start stacking":"Install Xverse"}),(0,o.jsxs)(T.Z,{align:"center",justify:"center",children:[(0,o.jsxs)(tB,{children:["Don","'","t have a wallet yet?"]}),(0,o.jsx)(tN,{onClick:tr.P,children:"Download Xverse"})]})]})]})})]})})};let tX=n.ZP.div.withConfig({componentId:"sc-6956d2dd-0"})(["display:grid;gap:16px;grid-template-areas:'a' 'c' 'b';@media ","{grid-template-areas:'a a a' 'b c c' 'b c c';}@media ","{.registration-form-container{min-width:542px;}}"],p.Hb.min.lg,p.Hb.min.xl);var t$=()=>(0,o.jsxs)(tX,{children:[(0,o.jsx)("div",{style:{gridArea:"a"},children:(0,o.jsx)(ts,{})}),(0,o.jsx)("div",{style:{gridArea:"b"},children:(0,o.jsx)(eP,{})}),(0,o.jsx)("div",{className:"registration-form-container",style:{gridArea:"c"},children:(0,o.jsx)(tF,{})})]});let tD="true"===i(34155).env.NEXT_PUBLIC_SHOW_STACKING_STATE_MOCKER,tE=n.ZP.div.withConfig({componentId:"sc-a9f3f12a-0"})(["height:100%;padding:40px;"]),tO=n.ZP.h1.withConfig({componentId:"sc-a9f3f12a-1"})(["",";display:flex;align-items:center;justify-content:space-between;"],e=>{let{theme:t}=e;return t.typography.headline_xl}),tR=n.ZP.div.withConfig({componentId:"sc-a9f3f12a-2"})(["",";margin-top:16px;margin-bottom:56px;"],e=>{let{theme:t}=e;return t.typography.body_medium_m}),tL=n.ZP.div.withConfig({componentId:"sc-a9f3f12a-3"})(["display:flex;margin-top:36px;gap:",";flex-direction:column;@media (min-width:768px){flex-direction:row;}"],e=>e.theme.space.m),tq=n.ZP.div.withConfig({componentId:"sc-a9f3f12a-4"})(["margin-top:",";display:inline-block;border:1px solid ",";padding:"," ",";border-radius:","px;"],e=>e.theme.space.l,e=>e.theme.colors.white_200,e=>e.theme.space.xs,e=>e.theme.space.s,e=>e.theme.radius(4)),tM=n.ZP.div.withConfig({componentId:"sc-a9f3f12a-5"})(["opacity:0;animation:fadeIn 0.2s ease-out forwards;@keyframes fadeIn{to{opacity:1;}}"]);n.ZP.div.withConfig({componentId:"sc-a9f3f12a-6"})(["",";display:flex;flex-direction:column;align-items:center;margin-top:",";border:1px solid ",";border-radius:",";padding:"," ",";color:",";max-width:680px;margin:0 auto;"],e=>{let{theme:t}=e;return t.typography.body_m},e=>{let{theme:t}=e;return t.space.xxxxl},e=>{let{theme:t}=e;return t.colors.white_850},e=>{let{theme:t}=e;return t.space.m},e=>{let{theme:t}=e;return t.space.xxxl},e=>{let{theme:t}=e;return t.space.xl},e=>{let{theme:t}=e;return t.colors.white_400}),n.ZP.div.withConfig({componentId:"sc-a9f3f12a-7"})(["",";color:",";margin-bottom:",";"],e=>{let{theme:t}=e;return t.typography.body_medium_l},e=>{let{theme:t}=e;return t.colors.white_200},e=>{let{theme:t}=e;return t.space.m}),n.ZP.button.withConfig({componentId:"sc-a9f3f12a-8"})(["background-color:transparent;color:",";margin-top:",";padding:",";transition:opacity 0.1s ease;&:hover{opacity:0.8;}&:active{opacity:0.6;}"],e=>{let{theme:t}=e;return t.colors.tangerine},e=>{let{theme:t}=e;return t.space.xs},e=>{let{theme:t}=e;return t.space.xxs});var tW=()=>{var e;let t=(0,x.n)();return(0,o.jsxs)(tE,{children:[(0,o.jsxs)(tO,{children:["Stack STX, Earn BTC",tD&&(0,o.jsx)(Z,{})]}),(0,o.jsx)(tR,{children:"Lock your STX with Xverse Pool to earn up to 10% Bitcoin yield. Enjoy non-custodial stacking, low minimums, and support the Stacks network while earning BTC."}),t.isLoading&&(0,o.jsxs)(tL,{children:[(0,o.jsx)(c,{}),(0,o.jsx)(c,{})]}),t.isSuccess&&((e=t.data)===m.QQ.NotStacking?(0,o.jsx)(tM,{children:(0,o.jsx)(t$,{})}):e===m.QQ.Pending||e===m.QQ.Delegated||e===m.QQ.Locked?(0,o.jsx)(tM,{children:(0,o.jsx)(e5,{pendingStackingState:e})}):e===m.QQ.Stacking||e===m.QQ.Revoked?(0,o.jsx)(tM,{children:(0,o.jsx)(eH,{})}):(0,o.jsx)(tM,{children:(0,o.jsx)(tq,{children:e})}))]})}}},function(e){e.O(0,[7066,8551,684,1524,3253,6873,4314,5251,4556,2888,9774,179],function(){return e(e.s=95457)}),_N_E=e.O()}]);